<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Creating an efficient indexing pipeline for the 'linkedin-skill-assessments-quizzes' repository involves systematic cloning, data processing, indexing, and query service setup. This comprehensive guide will walk you through each step with detailed code snippets, leveraging the `Whoosh` library for indexing." name=description><meta content="Harminder Singh Nijjar" name=author><link href=https://harminder.dev/blog/2023/11/14/building-an-indexing-pipeline-for-linkedin-skill-assessments-quizzes-repository/ rel=canonical><link href=../../07/openais-developer-conference/ rel=prev><link href=../../../../../resources/Images/favicon.png rel=icon><meta content="mkdocs-1.5.3, mkdocs-material-9.4.7" name=generator><title>Building an Indexing Pipeline for LinkedIn Skill Assessments Quizzes Repository - Harminder Singh Nijjar</title><link href=../../../../../assets/stylesheets/main.4b4a2bd9.min.css rel=stylesheet><link href=../../../../../assets/stylesheets/palette.356b1318.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../../../../assets/_mkdocstrings.css rel=stylesheet><link href=../../../../../css/tailwind.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/flowbite@1.0.0/dist/flowbite.min.css rel=stylesheet><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><link href=../../../../../css/custom.css rel=stylesheet><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-X0B1C5DM9K"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-X0B1C5DM9K",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-X0B1C5DM9K",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta content=website property=og:type><meta content="Building an Indexing Pipeline for LinkedIn Skill Assessments Quizzes Repository - Harminder Singh Nijjar" property=og:title><meta content="Creating an efficient indexing pipeline for the 'linkedin-skill-assessments-quizzes' repository involves systematic cloning, data processing, indexing, and query service setup. This comprehensive guide will walk you through each step with detailed code snippets, leveraging the `Whoosh` library for indexing." property=og:description><meta content=https://github.com/harmindersinghnijjar/face/blob/main/fotor_2023-8-13_21_49_31-fotor-2023081322615.png property=og:image><meta content=image/png property=og:image:type><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><meta content=https://harminder.dev/blog/2023/11/14/building-an-indexing-pipeline-for-linkedin-skill-assessments-quizzes-repository/ property=og:url><meta content=summary_large_image name=twitter:card><meta content="Building an Indexing Pipeline for LinkedIn Skill Assessments Quizzes Repository - Harminder Singh Nijjar" name=twitter:title><meta content="Creating an efficient indexing pipeline for the 'linkedin-skill-assessments-quizzes' repository involves systematic cloning, data processing, indexing, and query service setup. This comprehensive guide will walk you through each step with detailed code snippets, leveraging the `Whoosh` library for indexing." name=twitter:description><meta content=https://harminder.dev/assets/images/social/blog/posts/data_indexing.png name=twitter:image><meta content="Building an Indexing Pipeline for LinkedIn Skill Assessments Quizzes Repository" name=title><meta content=website property=og:type><meta content=https://harminder.dev/blog/2023/11/14/building-an-indexing-pipeline-for-linkedin-skill-assessments-quizzes-repository property=og:url><meta content="Building an Indexing Pipeline for LinkedIn Skill Assessments Quizzes Repository" property=og:title><meta content="Creating an efficient indexing pipeline for the 'linkedin-skill-assessments-quizzes' repository involves systematic cloning, data processing, indexing, and query service setup. This comprehensive guide will walk you through each step with detailed code snippets, leveraging the `Whoosh` library for indexing." property=og:description><meta content=summary_large_image property=twitter:card><meta content=https://harminder.dev/blog/2023/11/14/building-an-indexing-pipeline-for-linkedin-skill-assessments-quizzes-repository property=twitter:url><meta content="Building an Indexing Pipeline for LinkedIn Skill Assessments Quizzes Repository" property=twitter:title><meta content="Creating an efficient indexing pipeline for the 'linkedin-skill-assessments-quizzes' repository involves systematic cloning, data processing, indexing, and query service setup. This comprehensive guide will walk you through each step with detailed code snippets, leveraging the `Whoosh` library for indexing." property=twitter:description><meta content=https://github.com/harmindersinghnijjar/face/blob/main/fotor_2023-8-13_21_49_31-fotor-2023081322615.png property=twitter:image></head> <body data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=default dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#building-an-indexing-pipeline-for-linkedin-skill-assessments-quizzes-repository> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="Harminder Singh Nijjar" class="md-header__button md-logo" data-md-component=logo href=../../../../.. title="Harminder Singh Nijjar"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Harminder Singh Nijjar </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Building an Indexing Pipeline for LinkedIn Skill Assessments Quizzes Repository </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to light mode" class=md-option data-md-color-accent=indigo data-md-color-media=(prefers-color-scheme) data-md-color-primary=indigo data-md-color-scheme=default id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_3 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"></path></svg> </label> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent=indigo data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary=indigo data-md-color-scheme=default id=__palette_2 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> <input aria-label="Switch to system preference" class=md-option data-md-color-accent=indigo data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary=indigo data-md-color-scheme=slate id=__palette_3 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_2 hidden title="Switch to system preference"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <a aria-label=Share class="md-search__icon md-icon" data-clipboard data-clipboard-text data-md-component=search-share href=javascript:void(0) tabindex=-1 title=Share> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg> </a> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../../../../..> Home </a> </li> <li class=md-tabs__item> <a href=../../../../../projects/ class=md-tabs__link> Projects </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=../../../../../setup/index.md> Areas </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../../../ class=md-tabs__link> Blog </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation hidden> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Harminder Singh Nijjar" class="md-nav__button md-logo" data-md-component=logo href=../../../../.. title="Harminder Singh Nijjar"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg> </a> Harminder Singh Nijjar </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../../..> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../../../projects/ class=md-nav__link> <span class=md-ellipsis> Projects </span> </a> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=false aria-labelledby=__nav_2_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_2 type=checkbox> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Dubbing pipeline </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Dubbing pipeline </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../projects/Dubbing%20pipeline/dub_with_elevenlabs/ class=md-nav__link> <span class=md-ellipsis> Dub with ElevenLabs Google Chrome Extension </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_3 type=checkbox> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Midjourney Automation Bot </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Midjourney Automation Bot </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_3_1 type=checkbox> <label class=md-nav__link for=__nav_2_3_1 id=__nav_2_3_1_label tabindex=0> <span class=md-ellipsis> Wiki </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_3_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_3_1> <span class="md-nav__icon md-icon"></span> Wiki </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../projects/Midjourney%20Automation%20Bot/Wiki/Overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_3_1_2 type=checkbox> <label class=md-nav__link for=__nav_2_3_1_2 id=__nav_2_3_1_2_label tabindex=0> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_3_1_2_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_2_3_1_2> <span class="md-nav__icon md-icon"></span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_3_1_2_1 type=checkbox> <label class=md-nav__link for=__nav_2_3_1_2_1 id=__nav_2_3_1_2_1_label tabindex=0> <span class=md-ellipsis> Requested features </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_3_1_2_1_label class=md-nav data-md-level=5> <label class=md-nav__title for=__nav_2_3_1_2_1> <span class="md-nav__icon md-icon"></span> Requested features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../projects/Midjourney%20Automation%20Bot/Wiki/Features/Requested%20features/Automated%20Instagram%20image%20uploading%20with%20advanced%20captioning/ class=md-nav__link> <span class=md-ellipsis> Automated Instagram image uploading with advanced captioning </span> </a> </li> <li class=md-nav__item> <a href=../../../../../projects/Midjourney%20Automation%20Bot/Wiki/Features/Requested%20features/Improved%20documentation/ class=md-nav__link> <span class=md-ellipsis> Improved Documentation </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_4 type=checkbox> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> RunescapeGPT </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> RunescapeGPT </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_4_1 type=checkbox> <label class=md-nav__link for=__nav_2_4_1 id=__nav_2_4_1_label tabindex=0> <span class=md-ellipsis> Wiki </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_4_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_4_1> <span class="md-nav__icon md-icon"></span> Wiki </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../projects/RunescapeGPT/Wiki/Overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_5 type=checkbox> <label class=md-nav__link for=__nav_2_5 id=__nav_2_5_label tabindex=0> <span class=md-ellipsis> Social media automation </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_5_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Social media automation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_5_1 type=checkbox> <label class=md-nav__link for=__nav_2_5_1 id=__nav_2_5_1_label tabindex=0> <span class=md-ellipsis> Instagram </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_5_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_5_1> <span class="md-nav__icon md-icon"></span> Instagram </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../projects/Social%20media%20automation/Instagram/Unfollowing%20non-followers/Unfollowing_non-followers/ class=md-nav__link> <span class=md-ellipsis> Unfollowing non-followers </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_5_2 type=checkbox> <label class=md-nav__link for=__nav_2_5_2 id=__nav_2_5_2_label tabindex=0> <span class=md-ellipsis> Truth Social </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_5_2_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> Truth Social </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_5_2_1 type=checkbox> <label class=md-nav__link for=__nav_2_5_2_1 id=__nav_2_5_2_1_label tabindex=0> <span class=md-ellipsis> Account cloning </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_5_2_1_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_2_5_2_1> <span class="md-nav__icon md-icon"></span> Account cloning </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../projects/Social%20media%20automation/Truth%20Social/Account%20cloning/Downloading_Media/Downloading_Media/ class=md-nav__link> <span class=md-ellipsis> Downloading media </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_6 type=checkbox> <label class=md-nav__link for=__nav_2_6 id=__nav_2_6_label tabindex=0> <span class=md-ellipsis> Websites </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_6_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Websites </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_6_1 type=checkbox> <label class=md-nav__link for=__nav_2_6_1 id=__nav_2_6_1_label tabindex=0> <span class=md-ellipsis> Vercel </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_6_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_6_1> <span class="md-nav__icon md-icon"></span> Vercel </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_6_1_1 type=checkbox> <label class=md-nav__link for=__nav_2_6_1_1 id=__nav_2_6_1_1_label tabindex=0> <span class=md-ellipsis> GitBute </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_6_1_1_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_2_6_1_1> <span class="md-nav__icon md-icon"></span> GitBute </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../projects/Websites/Vercel/GitBute/3D%20GitHub%20Contributions/3D_GitHub_Contributions/ class=md-nav__link> <span class=md-ellipsis> 3D GitHub Contributions </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_6_2 type=checkbox> <label class=md-nav__link for=__nav_2_6_2 id=__nav_2_6_2_label tabindex=0> <span class=md-ellipsis> MkDocs </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_6_2_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> MkDocs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_6_2_1 type=checkbox> <label class=md-nav__link for=__nav_2_6_2_1 id=__nav_2_6_2_1_label tabindex=0> <span class=md-ellipsis> Adding Assets </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_6_2_1_label class=md-nav data-md-level=4> <label class=md-nav__title for=__nav_2_6_2_1> <span class="md-nav__icon md-icon"></span> Adding Assets </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2_6_2_1_1 type=checkbox> <label class=md-nav__link for=__nav_2_6_2_1_1 id=__nav_2_6_2_1_1_label tabindex=0> <span class=md-ellipsis> Additional CSS </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_6_2_1_1_label class=md-nav data-md-level=5> <label class=md-nav__title for=__nav_2_6_2_1_1> <span class="md-nav__icon md-icon"></span> Additional CSS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../projects/Websites/MkDocs/Knowledge%20base/Adding%20assets/Additional%20CSS/Tailwind%20CSS/setup-material-mkdocs-insiders-tailwind/ class=md-nav__link> <span class=md-ellipsis> Tailwind CSS </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Areas </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Areas </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/index.md> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/changing-the-colors.md> <span class=md-ellipsis> Changing the colors </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/changing-the-fonts.md> <span class=md-ellipsis> Changing the fonts </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/changing-the-language.md> <span class=md-ellipsis> Changing the language </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/changing-the-logo-and-icons.md> <span class=md-ellipsis> Changing the logo and icons </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/ensuring-data-privacy.md> <span class=md-ellipsis> Ensuring data privacy </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/setting-up-navigation.md> <span class=md-ellipsis> Setting up navigation </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/setting-up-site-search.md> <span class=md-ellipsis> Setting up site search </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/setting-up-site-analytics.md> <span class=md-ellipsis> Setting up site analytics </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/setting-up-social-cards.md> <span class=md-ellipsis> Setting up social cards </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/setting-up-a-blog.md> <span class=md-ellipsis> Setting up a blog </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/setting-up-tags.md> <span class=md-ellipsis> Setting up tags </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/setting-up-versioning.md> <span class=md-ellipsis> Setting up versioning </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/setting-up-the-header.md> <span class=md-ellipsis> Setting up the header </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/setting-up-the-footer.md> <span class=md-ellipsis> Setting up the footer </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/adding-a-git-repository.md> <span class=md-ellipsis> Adding a git repository </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/adding-a-comment-system.md> <span class=md-ellipsis> Adding a comment system </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/building-an-optimized-site.md> <span class=md-ellipsis> Building an optimized site </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/building-for-offline-usage.md> <span class=md-ellipsis> Building for offline usage </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3_20 type=checkbox> <label class=md-nav__link for=__nav_3_20 id=__nav_3_20_label tabindex=0> <span class=md-ellipsis> Extensions </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_20_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_3_20> <span class="md-nav__icon md-icon"></span> Extensions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/extensions/index.md> <span class=md-ellipsis> None </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/extensions/python-markdown.md> <span class=md-ellipsis> Python Markdown </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../../../../setup/extensions/python-markdown-extensions.md> <span class=md-ellipsis> Python Markdown Extensions </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <div class="md-nav__link md-nav__container"> <a href=../../../../ class=md-nav__link> <span class=md-ellipsis> Blog </span> </a> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded=true aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_2 type=checkbox> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Archive </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Archive </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../archive/2023/ class=md-nav__link> <span class=md-ellipsis> 2023 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4_3 type=checkbox> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> Categories </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Categories </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../category/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/whoosh/ class=md-nav__link> <span class=md-ellipsis> Whoosh </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/indexing/ class=md-nav__link> <span class=md-ellipsis> Indexing </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/linkedin/ class=md-nav__link> <span class=md-ellipsis> LinkedIn </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/skill-assessments/ class=md-nav__link> <span class=md-ellipsis> Skill Assessments </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/quizzes/ class=md-nav__link> <span class=md-ellipsis> Quizzes </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/ai/ class=md-nav__link> <span class=md-ellipsis> AI </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/openai/ class=md-nav__link> <span class=md-ellipsis> OpenAI </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/api/ class=md-nav__link> <span class=md-ellipsis> API </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/text-to-speech/ class=md-nav__link> <span class=md-ellipsis> Text-to-Speech </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/elevenlabs/ class=md-nav__link> <span class=md-ellipsis> ElevenLabs </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/osrs/ class=md-nav__link> <span class=md-ellipsis> OSRS </span> </a> </li> <li class=md-nav__item> <a href=../../../../category/runescape/ class=md-nav__link> <span class=md-ellipsis> RuneScape </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#step-1-cloning-the-repository> Step 1: Cloning the Repository </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#step-2-processing-the-data> Step 2: Processing the Data </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#step-3-indexing-the-data> Step 3: Indexing the Data </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#step-4-setting-up-the-query-service> Step 4: Setting Up the Query Service </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#step-5-querying-the-index> Step 5: Querying the Index </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#conclusion> Conclusion </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content md-content--post" data-md-component=content> <div class="md-sidebar md-sidebar--post" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class="md-sidebar__inner md-post"> <nav class="md-nav md-nav--primary"> <div class=md-post__back> <div class="md-nav__title md-nav__container"> <a href=../../../../ class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> <span class=md-ellipsis> Back to index </span> </a> </div> </div> <div class="md-post__authors md-typeset"> <div class="md-profile md-post__profile"> <span class="md-author md-author--long"> <img alt="Harminder Singh Nijjar" src="https://avatars.githubusercontent.com/u/110620707?s=400&u=d42553f4284273f20d81743f9ea8b57a62e690fc&v=4"> </span> <span class=md-profile__description> <strong>Harminder Singh Nijjar</strong><br> Creator </span> </div> </div> <ul class="md-post__meta md-nav__list"> <li class="md-nav__item md-nav__item--section"> <div class=md-post__title> <span class=md-ellipsis> Metadata </span> </div> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <div class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"></path></svg> <time class=md-ellipsis datetime="2023-11-14 00:00:00">November 14, 2023</time> </div> </li> <li class=md-nav__item> <div class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"></path></svg> <span class=md-ellipsis> in <a href=../../../../category/python/ >Python</a>, <a href=../../../../category/whoosh/ >Whoosh</a>, <a href=../../../../category/indexing/ >Indexing</a>, <a href=../../../../category/linkedin/ >LinkedIn</a>, <a href=../../../../category/skill-assessments/ >Skill Assessments</a>, <a href=../../../../category/quizzes/ >Quizzes</a></span> </div> </li> <li class=md-nav__item> <div class=md-nav__link> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"></path></svg> <span class=md-ellipsis> 6 min read </span> </div> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <article class="md-content__inner md-typeset"> <div><h1 id=building-an-indexing-pipeline-for-linkedin-skill-assessments-quizzes-repository>Building an Indexing Pipeline for LinkedIn Skill Assessments Quizzes Repository</h1> <p>Creating an efficient indexing pipeline for the 'linkedin-skill-assessments-quizzes' repository involves systematic cloning, data processing, indexing, and query service setup. This comprehensive guide will walk you through each step with detailed code snippets, leveraging the <code>Whoosh</code> library for indexing.</p> <h2 id=step-1-cloning-the-repository>Step 1: Cloning the Repository</h2> <p>Start by cloning the repository to your local environment. This makes the content available for processing.</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a>git<span class=w> </span>clone<span class=w> </span>https://github.com/Ebazhanov/linkedin-skill-assessments-quizzes.git
</span></code></pre></div> <h2 id=step-2-processing-the-data>Step 2: Processing the Data</h2> <p>Processing the data involves parsing the JSON files and extracting the relevant information. The following code snippet demonstrates how to extract the question, answer, image, and options from the JSON files.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a><span class=kn>import</span> <span class=nn>os</span>
</span><span id=__span-1-2><a href=#__codelineno-1-2 id=__codelineno-1-2 name=__codelineno-1-2></a><span class=kn>import</span> <span class=nn>json</span>
</span><span id=__span-1-3><a href=#__codelineno-1-3 id=__codelineno-1-3 name=__codelineno-1-3></a><span class=kn>import</span> <span class=nn>logging</span>
</span><span id=__span-1-4><a href=#__codelineno-1-4 id=__codelineno-1-4 name=__codelineno-1-4></a>
</span><span id=__span-1-5><a href=#__codelineno-1-5 id=__codelineno-1-5 name=__codelineno-1-5></a><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s2>"QuizIndexingService"</span><span class=p>)</span>
</span><span id=__span-1-6><a href=#__codelineno-1-6 id=__codelineno-1-6 name=__codelineno-1-6></a><span class=n>logger</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span>
</span><span id=__span-1-7><a href=#__codelineno-1-7 id=__codelineno-1-7 name=__codelineno-1-7></a>
</span><span id=__span-1-8><a href=#__codelineno-1-8 id=__codelineno-1-8 name=__codelineno-1-8></a><span class=n>file_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>FileHandler</span><span class=p>(</span><span class=s2>"quiz_indexing_service.log"</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>"a"</span><span class=p>)</span>
</span><span id=__span-1-9><a href=#__codelineno-1-9 id=__codelineno-1-9 name=__codelineno-1-9></a><span class=n>log_format</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>Formatter</span><span class=p>(</span>
</span><span id=__span-1-10><a href=#__codelineno-1-10 id=__codelineno-1-10 name=__codelineno-1-10></a><span class=s2>"</span><span class=si>%(asctime)s</span><span class=s2> - </span><span class=si>%(name)s</span><span class=s2> - [</span><span class=si>%(levelname)s</span><span class=s2>] [</span><span class=si>%(pathname)s</span><span class=s2>:</span><span class=si>%(lineno)d</span><span class=s2>] - </span><span class=si>%(message)s</span><span class=s2> - "</span>
</span><span id=__span-1-11><a href=#__codelineno-1-11 id=__codelineno-1-11 name=__codelineno-1-11></a><span class=s2>"[</span><span class=si>%(process)d</span><span class=s2>:</span><span class=si>%(thread)d</span><span class=s2>]"</span>
</span><span id=__span-1-12><a href=#__codelineno-1-12 id=__codelineno-1-12 name=__codelineno-1-12></a><span class=p>)</span>
</span><span id=__span-1-13><a href=#__codelineno-1-13 id=__codelineno-1-13 name=__codelineno-1-13></a><span class=n>file_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>log_format</span><span class=p>)</span>
</span><span id=__span-1-14><a href=#__codelineno-1-14 id=__codelineno-1-14 name=__codelineno-1-14></a><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>file_handler</span><span class=p>)</span>
</span><span id=__span-1-15><a href=#__codelineno-1-15 id=__codelineno-1-15 name=__codelineno-1-15></a>
</span><span id=__span-1-16><a href=#__codelineno-1-16 id=__codelineno-1-16 name=__codelineno-1-16></a><span class=n>console_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
</span><span id=__span-1-17><a href=#__codelineno-1-17 id=__codelineno-1-17 name=__codelineno-1-17></a><span class=n>console_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>log_format</span><span class=p>)</span>
</span><span id=__span-1-18><a href=#__codelineno-1-18 id=__codelineno-1-18 name=__codelineno-1-18></a><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>console_handler</span><span class=p>)</span>
</span><span id=__span-1-19><a href=#__codelineno-1-19 id=__codelineno-1-19 name=__codelineno-1-19></a>
</span><span id=__span-1-20><a href=#__codelineno-1-20 id=__codelineno-1-20 name=__codelineno-1-20></a><span class=k>def</span> <span class=nf>process_json_files</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>):</span>
</span><span id=__span-1-21><a href=#__codelineno-1-21 id=__codelineno-1-21 name=__codelineno-1-21></a>    <span class=n>questions</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-1-22><a href=#__codelineno-1-22 id=__codelineno-1-22 name=__codelineno-1-22></a>    <span class=k>for</span> <span class=n>json_filename</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>):</span>
</span><span id=__span-1-23><a href=#__codelineno-1-23 id=__codelineno-1-23 name=__codelineno-1-23></a>        <span class=n>json_file_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>,</span> <span class=n>json_filename</span><span class=p>)</span>
</span><span id=__span-1-24><a href=#__codelineno-1-24 id=__codelineno-1-24 name=__codelineno-1-24></a>        <span class=k>if</span> <span class=n>json_file_path</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>".json"</span><span class=p>):</span>
</span><span id=__span-1-25><a href=#__codelineno-1-25 id=__codelineno-1-25 name=__codelineno-1-25></a>            <span class=k>try</span><span class=p>:</span>
</span><span id=__span-1-26><a href=#__codelineno-1-26 id=__codelineno-1-26 name=__codelineno-1-26></a>                <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>json_file_path</span><span class=p>,</span> <span class=s2>"r"</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s2>"utf-8"</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span><span id=__span-1-27><a href=#__codelineno-1-27 id=__codelineno-1-27 name=__codelineno-1-27></a>                    <span class=n>questions</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>file</span><span class=p>))</span>
</span><span id=__span-1-28><a href=#__codelineno-1-28 id=__codelineno-1-28 name=__codelineno-1-28></a>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-1-29><a href=#__codelineno-1-29 id=__codelineno-1-29 name=__codelineno-1-29></a>                <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
</span><span id=__span-1-30><a href=#__codelineno-1-30 id=__codelineno-1-30 name=__codelineno-1-30></a>                    <span class=sa>f</span><span class=s2>"Failed to process file </span><span class=si>{</span><span class=n>json_file_path</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>"</span><span class=p>,</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-1-31><a href=#__codelineno-1-31 id=__codelineno-1-31 name=__codelineno-1-31></a>                <span class=p>)</span>
</span><span id=__span-1-32><a href=#__codelineno-1-32 id=__codelineno-1-32 name=__codelineno-1-32></a>    <span class=k>return</span> <span class=n>questions</span>
</span><span id=__span-1-33><a href=#__codelineno-1-33 id=__codelineno-1-33 name=__codelineno-1-33></a>
</span><span id=__span-1-34><a href=#__codelineno-1-34 id=__codelineno-1-34 name=__codelineno-1-34></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>"__main__"</span><span class=p>:</span>
</span><span id=__span-1-35><a href=#__codelineno-1-35 id=__codelineno-1-35 name=__codelineno-1-35></a>    <span class=n>json_files_directory</span> <span class=o>=</span> <span class=s2>"your JSON files directory"</span> 
</span><span id=__span-1-36><a href=#__codelineno-1-36 id=__codelineno-1-36 name=__codelineno-1-36></a>    <span class=n>questions</span> <span class=o>=</span> <span class=n>process_json_files</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>)</span>
</span><span id=__span-1-37><a href=#__codelineno-1-37 id=__codelineno-1-37 name=__codelineno-1-37></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Total questions: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>questions</span><span class=p>)</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span></code></pre></div> <h2 id=step-3-indexing-the-data>Step 3: Indexing the Data</h2> <p>After processing the data, you can create an index using the <code>Whoosh</code> library. The following code snippet demonstrates how to create an index with the question, answer, image, and options fields.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=kn>import</span> <span class=nn>os</span>
</span><span id=__span-2-2><a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a><span class=kn>import</span> <span class=nn>json</span>
</span><span id=__span-2-3><a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a><span class=kn>import</span> <span class=nn>logging</span>
</span><span id=__span-2-4><a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a><span class=kn>from</span> <span class=nn>whoosh.index</span> <span class=kn>import</span> <span class=n>create_in</span><span class=p>,</span> <span class=n>open_dir</span>
</span><span id=__span-2-5><a href=#__codelineno-2-5 id=__codelineno-2-5 name=__codelineno-2-5></a><span class=kn>from</span> <span class=nn>whoosh.fields</span> <span class=kn>import</span> <span class=n>Schema</span><span class=p>,</span> <span class=n>TEXT</span><span class=p>,</span> <span class=n>ID</span><span class=p>,</span> <span class=n>STORED</span>
</span><span id=__span-2-6><a href=#__codelineno-2-6 id=__codelineno-2-6 name=__codelineno-2-6></a><span class=kn>from</span> <span class=nn>whoosh.qparser</span> <span class=kn>import</span> <span class=n>MultifieldParser</span>
</span><span id=__span-2-7><a href=#__codelineno-2-7 id=__codelineno-2-7 name=__codelineno-2-7></a><span class=kn>from</span> <span class=nn>whoosh.analysis</span> <span class=kn>import</span> <span class=n>StemmingAnalyzer</span>
</span><span id=__span-2-8><a href=#__codelineno-2-8 id=__codelineno-2-8 name=__codelineno-2-8></a>
</span><span id=__span-2-9><a href=#__codelineno-2-9 id=__codelineno-2-9 name=__codelineno-2-9></a><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s2>"QuizIndexingService"</span><span class=p>)</span>
</span><span id=__span-2-10><a href=#__codelineno-2-10 id=__codelineno-2-10 name=__codelineno-2-10></a><span class=n>logger</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span>
</span><span id=__span-2-11><a href=#__codelineno-2-11 id=__codelineno-2-11 name=__codelineno-2-11></a>
</span><span id=__span-2-12><a href=#__codelineno-2-12 id=__codelineno-2-12 name=__codelineno-2-12></a><span class=n>file_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>FileHandler</span><span class=p>(</span><span class=s2>"quiz_indexing_service.log"</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>"a"</span><span class=p>)</span>
</span><span id=__span-2-13><a href=#__codelineno-2-13 id=__codelineno-2-13 name=__codelineno-2-13></a><span class=n>log_format</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>Formatter</span><span class=p>(</span>
</span><span id=__span-2-14><a href=#__codelineno-2-14 id=__codelineno-2-14 name=__codelineno-2-14></a><span class=s2>"</span><span class=si>%(asctime)s</span><span class=s2> - </span><span class=si>%(name)s</span><span class=s2> - [</span><span class=si>%(levelname)s</span><span class=s2>] [</span><span class=si>%(pathname)s</span><span class=s2>:</span><span class=si>%(lineno)d</span><span class=s2>] - </span><span class=si>%(message)s</span><span class=s2> - "</span>
</span><span id=__span-2-15><a href=#__codelineno-2-15 id=__codelineno-2-15 name=__codelineno-2-15></a><span class=s2>"[</span><span class=si>%(process)d</span><span class=s2>:</span><span class=si>%(thread)d</span><span class=s2>]"</span>
</span><span id=__span-2-16><a href=#__codelineno-2-16 id=__codelineno-2-16 name=__codelineno-2-16></a><span class=p>)</span>
</span><span id=__span-2-17><a href=#__codelineno-2-17 id=__codelineno-2-17 name=__codelineno-2-17></a><span class=n>file_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>log_format</span><span class=p>)</span>
</span><span id=__span-2-18><a href=#__codelineno-2-18 id=__codelineno-2-18 name=__codelineno-2-18></a><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>file_handler</span><span class=p>)</span>
</span><span id=__span-2-19><a href=#__codelineno-2-19 id=__codelineno-2-19 name=__codelineno-2-19></a>
</span><span id=__span-2-20><a href=#__codelineno-2-20 id=__codelineno-2-20 name=__codelineno-2-20></a><span class=n>console_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
</span><span id=__span-2-21><a href=#__codelineno-2-21 id=__codelineno-2-21 name=__codelineno-2-21></a><span class=n>console_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>log_format</span><span class=p>)</span>
</span><span id=__span-2-22><a href=#__codelineno-2-22 id=__codelineno-2-22 name=__codelineno-2-22></a><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>console_handler</span><span class=p>)</span>
</span><span id=__span-2-23><a href=#__codelineno-2-23 id=__codelineno-2-23 name=__codelineno-2-23></a>
</span><span id=__span-2-24><a href=#__codelineno-2-24 id=__codelineno-2-24 name=__codelineno-2-24></a><span class=n>schema</span> <span class=o>=</span> <span class=n>Schema</span><span class=p>(</span>
</span><span id=__span-2-25><a href=#__codelineno-2-25 id=__codelineno-2-25 name=__codelineno-2-25></a>    <span class=n>question</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>analyzer</span><span class=o>=</span><span class=n>StemmingAnalyzer</span><span class=p>()),</span>
</span><span id=__span-2-26><a href=#__codelineno-2-26 id=__codelineno-2-26 name=__codelineno-2-26></a>    <span class=n>answer</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-2-27><a href=#__codelineno-2-27 id=__codelineno-2-27 name=__codelineno-2-27></a>    <span class=n>image</span><span class=o>=</span><span class=n>ID</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-2-28><a href=#__codelineno-2-28 id=__codelineno-2-28 name=__codelineno-2-28></a>    <span class=n>options</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-2-29><a href=#__codelineno-2-29 id=__codelineno-2-29 name=__codelineno-2-29></a><span class=p>)</span>
</span><span id=__span-2-30><a href=#__codelineno-2-30 id=__codelineno-2-30 name=__codelineno-2-30></a>
</span><span id=__span-2-31><a href=#__codelineno-2-31 id=__codelineno-2-31 name=__codelineno-2-31></a><span class=k>def</span> <span class=nf>create_search_index</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>,</span> <span class=n>index_dir</span><span class=p>):</span>
</span><span id=__span-2-32><a href=#__codelineno-2-32 id=__codelineno-2-32 name=__codelineno-2-32></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>index_dir</span><span class=p>):</span>
</span><span id=__span-2-33><a href=#__codelineno-2-33 id=__codelineno-2-33 name=__codelineno-2-33></a>        <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>index_dir</span><span class=p>)</span>
</span><span id=__span-2-34><a href=#__codelineno-2-34 id=__codelineno-2-34 name=__codelineno-2-34></a>
</span><span id=__span-2-35><a href=#__codelineno-2-35 id=__codelineno-2-35 name=__codelineno-2-35></a>    <span class=n>index</span> <span class=o>=</span> <span class=n>create_in</span><span class=p>(</span><span class=n>index_dir</span><span class=p>,</span> <span class=n>schema</span><span class=p>)</span>
</span><span id=__span-2-36><a href=#__codelineno-2-36 id=__codelineno-2-36 name=__codelineno-2-36></a>    <span class=n>writer</span> <span class=o>=</span> <span class=n>index</span><span class=o>.</span><span class=n>writer</span><span class=p>()</span>
</span><span id=__span-2-37><a href=#__codelineno-2-37 id=__codelineno-2-37 name=__codelineno-2-37></a>
</span><span id=__span-2-38><a href=#__codelineno-2-38 id=__codelineno-2-38 name=__codelineno-2-38></a>    <span class=k>for</span> <span class=n>json_filename</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>):</span>
</span><span id=__span-2-39><a href=#__codelineno-2-39 id=__codelineno-2-39 name=__codelineno-2-39></a>        <span class=n>json_file_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>,</span> <span class=n>json_filename</span><span class=p>)</span>
</span><span id=__span-2-40><a href=#__codelineno-2-40 id=__codelineno-2-40 name=__codelineno-2-40></a>        <span class=k>if</span> <span class=n>json_file_path</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>".json"</span><span class=p>):</span>
</span><span id=__span-2-41><a href=#__codelineno-2-41 id=__codelineno-2-41 name=__codelineno-2-41></a>            <span class=k>try</span><span class=p>:</span>
</span><span id=__span-2-42><a href=#__codelineno-2-42 id=__codelineno-2-42 name=__codelineno-2-42></a>                <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>json_file_path</span><span class=p>,</span> <span class=s2>"r"</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s2>"utf-8"</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span><span id=__span-2-43><a href=#__codelineno-2-43 id=__codelineno-2-43 name=__codelineno-2-43></a>                    <span class=n>questions</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
</span><span id=__span-2-44><a href=#__codelineno-2-44 id=__codelineno-2-44 name=__codelineno-2-44></a>                    <span class=k>for</span> <span class=n>question</span> <span class=ow>in</span> <span class=n>questions</span><span class=p>:</span>
</span><span id=__span-2-45><a href=#__codelineno-2-45 id=__codelineno-2-45 name=__codelineno-2-45></a>                        <span class=n>concatenated_options</span> <span class=o>=</span> <span class=s2>" "</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
</span><span id=__span-2-46><a href=#__codelineno-2-46 id=__codelineno-2-46 name=__codelineno-2-46></a>                            <span class=p>[</span><span class=n>opt</span><span class=p>[</span><span class=s2>"option"</span><span class=p>]</span> <span class=k>for</span> <span class=n>opt</span> <span class=ow>in</span> <span class=n>question</span><span class=p>[</span><span class=s2>"options"</span><span class=p>]]</span>
</span><span id=__span-2-47><a href=#__codelineno-2-47 id=__codelineno-2-47 name=__codelineno-2-47></a>                        <span class=p>)</span>
</span><span id=__span-2-48><a href=#__codelineno-2-48 id=__codelineno-2-48 name=__codelineno-2-48></a>                        <span class=n>writer</span><span class=o>.</span><span class=n>add_document</span><span class=p>(</span>
</span><span id=__span-2-49><a href=#__codelineno-2-49 id=__codelineno-2-49 name=__codelineno-2-49></a>                            <span class=n>question</span><span class=o>=</span><span class=n>question</span><span class=p>[</span><span class=s2>"question"</span><span class=p>],</span>
</span><span id=__span-2-50><a href=#__codelineno-2-50 id=__codelineno-2-50 name=__codelineno-2-50></a>                            <span class=n>answer</span><span class=o>=</span><span class=n>question</span><span class=p>[</span><span class=s2>"answer"</span><span class=p>],</span>
</span><span id=__span-2-51><a href=#__codelineno-2-51 id=__codelineno-2-51 name=__codelineno-2-51></a>                            <span class=n>image</span><span class=o>=</span><span class=n>question</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"image"</span><span class=p>,</span> <span class=s2>""</span><span class=p>),</span>
</span><span id=__span-2-52><a href=#__codelineno-2-52 id=__codelineno-2-52 name=__codelineno-2-52></a>                            <span class=n>options</span><span class=o>=</span><span class=n>concatenated_options</span><span class=p>,</span>
</span><span id=__span-2-53><a href=#__codelineno-2-53 id=__codelineno-2-53 name=__codelineno-2-53></a>                        <span class=p>)</span>
</span><span id=__span-2-54><a href=#__codelineno-2-54 id=__codelineno-2-54 name=__codelineno-2-54></a>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-2-55><a href=#__codelineno-2-55 id=__codelineno-2-55 name=__codelineno-2-55></a>                <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
</span><span id=__span-2-56><a href=#__codelineno-2-56 id=__codelineno-2-56 name=__codelineno-2-56></a>                    <span class=sa>f</span><span class=s2>"Failed to process file </span><span class=si>{</span><span class=n>json_file_path</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>"</span><span class=p>,</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-2-57><a href=#__codelineno-2-57 id=__codelineno-2-57 name=__codelineno-2-57></a>                <span class=p>)</span>
</span><span id=__span-2-58><a href=#__codelineno-2-58 id=__codelineno-2-58 name=__codelineno-2-58></a>
</span><span id=__span-2-59><a href=#__codelineno-2-59 id=__codelineno-2-59 name=__codelineno-2-59></a>    <span class=n>writer</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span><span id=__span-2-60><a href=#__codelineno-2-60 id=__codelineno-2-60 name=__codelineno-2-60></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>"Indexing completed successfully."</span><span class=p>)</span>
</span><span id=__span-2-61><a href=#__codelineno-2-61 id=__codelineno-2-61 name=__codelineno-2-61></a>
</span><span id=__span-2-62><a href=#__codelineno-2-62 id=__codelineno-2-62 name=__codelineno-2-62></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>"__main__"</span><span class=p>:</span>
</span><span id=__span-2-63><a href=#__codelineno-2-63 id=__codelineno-2-63 name=__codelineno-2-63></a>    <span class=n>json_files_directory</span> <span class=o>=</span> <span class=s2>"your JSON files directory"</span> 
</span><span id=__span-2-64><a href=#__codelineno-2-64 id=__codelineno-2-64 name=__codelineno-2-64></a>    <span class=n>index_dir</span> <span class=o>=</span> <span class=s2>"your index directory"</span> 
</span><span id=__span-2-65><a href=#__codelineno-2-65 id=__codelineno-2-65 name=__codelineno-2-65></a>    <span class=n>create_search_index</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>,</span> <span class=n>index_dir</span><span class=p>)</span>
</span></code></pre></div> <h2 id=step-4-setting-up-the-query-service>Step 4: Setting Up the Query Service</h2> <p>Next, you can set up a query service to search the index. The following code snippet demonstrates how to search the index for a given query string.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=kn>import</span> <span class=nn>os</span>
</span><span id=__span-3-2><a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a><span class=kn>import</span> <span class=nn>json</span>
</span><span id=__span-3-3><a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a><span class=kn>import</span> <span class=nn>logging</span>
</span><span id=__span-3-4><a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a><span class=kn>from</span> <span class=nn>whoosh.index</span> <span class=kn>import</span> <span class=n>create_in</span><span class=p>,</span> <span class=n>open_dir</span>
</span><span id=__span-3-5><a href=#__codelineno-3-5 id=__codelineno-3-5 name=__codelineno-3-5></a><span class=kn>from</span> <span class=nn>whoosh.fields</span> <span class=kn>import</span> <span class=n>Schema</span><span class=p>,</span> <span class=n>TEXT</span><span class=p>,</span> <span class=n>ID</span><span class=p>,</span> <span class=n>STORED</span>
</span><span id=__span-3-6><a href=#__codelineno-3-6 id=__codelineno-3-6 name=__codelineno-3-6></a><span class=kn>from</span> <span class=nn>whoosh.qparser</span> <span class=kn>import</span> <span class=n>MultifieldParser</span>
</span><span id=__span-3-7><a href=#__codelineno-3-7 id=__codelineno-3-7 name=__codelineno-3-7></a><span class=kn>from</span> <span class=nn>whoosh.analysis</span> <span class=kn>import</span> <span class=n>StemmingAnalyzer</span>
</span><span id=__span-3-8><a href=#__codelineno-3-8 id=__codelineno-3-8 name=__codelineno-3-8></a>
</span><span id=__span-3-9><a href=#__codelineno-3-9 id=__codelineno-3-9 name=__codelineno-3-9></a><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s2>"QuizIndexingService"</span><span class=p>)</span>
</span><span id=__span-3-10><a href=#__codelineno-3-10 id=__codelineno-3-10 name=__codelineno-3-10></a><span class=n>logger</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span>
</span><span id=__span-3-11><a href=#__codelineno-3-11 id=__codelineno-3-11 name=__codelineno-3-11></a>
</span><span id=__span-3-12><a href=#__codelineno-3-12 id=__codelineno-3-12 name=__codelineno-3-12></a><span class=n>file_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>FileHandler</span><span class=p>(</span><span class=s2>"quiz_indexing_service.log"</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>"a"</span><span class=p>)</span>
</span><span id=__span-3-13><a href=#__codelineno-3-13 id=__codelineno-3-13 name=__codelineno-3-13></a><span class=n>log_format</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>Formatter</span><span class=p>(</span>
</span><span id=__span-3-14><a href=#__codelineno-3-14 id=__codelineno-3-14 name=__codelineno-3-14></a><span class=s2>"</span><span class=si>%(asctime)s</span><span class=s2> - </span><span class=si>%(name)s</span><span class=s2> - [</span><span class=si>%(levelname)s</span><span class=s2>] [</span><span class=si>%(pathname)s</span><span class=s2>:</span><span class=si>%(lineno)d</span><span class=s2>] - </span><span class=si>%(message)s</span><span class=s2> - "</span>
</span><span id=__span-3-15><a href=#__codelineno-3-15 id=__codelineno-3-15 name=__codelineno-3-15></a><span class=s2>"[</span><span class=si>%(process)d</span><span class=s2>:</span><span class=si>%(thread)d</span><span class=s2>]"</span>
</span><span id=__span-3-16><a href=#__codelineno-3-16 id=__codelineno-3-16 name=__codelineno-3-16></a><span class=p>)</span>
</span><span id=__span-3-17><a href=#__codelineno-3-17 id=__codelineno-3-17 name=__codelineno-3-17></a><span class=n>file_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>log_format</span><span class=p>)</span>
</span><span id=__span-3-18><a href=#__codelineno-3-18 id=__codelineno-3-18 name=__codelineno-3-18></a><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>file_handler</span><span class=p>)</span>
</span><span id=__span-3-19><a href=#__codelineno-3-19 id=__codelineno-3-19 name=__codelineno-3-19></a>
</span><span id=__span-3-20><a href=#__codelineno-3-20 id=__codelineno-3-20 name=__codelineno-3-20></a><span class=n>console_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
</span><span id=__span-3-21><a href=#__codelineno-3-21 id=__codelineno-3-21 name=__codelineno-3-21></a><span class=n>console_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>log_format</span><span class=p>)</span>
</span><span id=__span-3-22><a href=#__codelineno-3-22 id=__codelineno-3-22 name=__codelineno-3-22></a><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>console_handler</span><span class=p>)</span>
</span><span id=__span-3-23><a href=#__codelineno-3-23 id=__codelineno-3-23 name=__codelineno-3-23></a>
</span><span id=__span-3-24><a href=#__codelineno-3-24 id=__codelineno-3-24 name=__codelineno-3-24></a><span class=n>schema</span> <span class=o>=</span> <span class=n>Schema</span><span class=p>(</span>
</span><span id=__span-3-25><a href=#__codelineno-3-25 id=__codelineno-3-25 name=__codelineno-3-25></a>    <span class=n>question</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>analyzer</span><span class=o>=</span><span class=n>StemmingAnalyzer</span><span class=p>()),</span>
</span><span id=__span-3-26><a href=#__codelineno-3-26 id=__codelineno-3-26 name=__codelineno-3-26></a>    <span class=n>answer</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-3-27><a href=#__codelineno-3-27 id=__codelineno-3-27 name=__codelineno-3-27></a>    <span class=n>image</span><span class=o>=</span><span class=n>ID</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-3-28><a href=#__codelineno-3-28 id=__codelineno-3-28 name=__codelineno-3-28></a>    <span class=n>options</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-3-29><a href=#__codelineno-3-29 id=__codelineno-3-29 name=__codelineno-3-29></a><span class=p>)</span>
</span><span id=__span-3-30><a href=#__codelineno-3-30 id=__codelineno-3-30 name=__codelineno-3-30></a>
</span><span id=__span-3-31><a href=#__codelineno-3-31 id=__codelineno-3-31 name=__codelineno-3-31></a><span class=k>def</span> <span class=nf>search_index</span><span class=p>(</span><span class=n>query_str</span><span class=p>,</span> <span class=n>index_dir</span><span class=p>):</span>
</span><span id=__span-3-32><a href=#__codelineno-3-32 id=__codelineno-3-32 name=__codelineno-3-32></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-3-33><a href=#__codelineno-3-33 id=__codelineno-3-33 name=__codelineno-3-33></a>        <span class=n>ix</span> <span class=o>=</span> <span class=n>open_dir</span><span class=p>(</span><span class=n>index_dir</span><span class=p>)</span>
</span><span id=__span-3-34><a href=#__codelineno-3-34 id=__codelineno-3-34 name=__codelineno-3-34></a>        <span class=k>with</span> <span class=n>ix</span><span class=o>.</span><span class=n>searcher</span><span class=p>()</span> <span class=k>as</span> <span class=n>searcher</span><span class=p>:</span>
</span><span id=__span-3-35><a href=#__codelineno-3-35 id=__codelineno-3-35 name=__codelineno-3-35></a>            <span class=n>parser</span> <span class=o>=</span> <span class=n>MultifieldParser</span><span class=p>([</span><span class=s2>"question"</span><span class=p>,</span> <span class=s2>"options"</span><span class=p>],</span> <span class=n>schema</span><span class=o>=</span><span class=n>ix</span><span class=o>.</span><span class=n>schema</span><span class=p>)</span>
</span><span id=__span-3-36><a href=#__codelineno-3-36 id=__codelineno-3-36 name=__codelineno-3-36></a>            <span class=n>query_str</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>"_</span><span class=si>{</span><span class=n>query_str</span><span class=si>}</span><span class=s2>_"</span>
</span><span id=__span-3-37><a href=#__codelineno-3-37 id=__codelineno-3-37 name=__codelineno-3-37></a>            <span class=n>query</span> <span class=o>=</span> <span class=n>parser</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>query_str</span><span class=p>)</span>
</span><span id=__span-3-38><a href=#__codelineno-3-38 id=__codelineno-3-38 name=__codelineno-3-38></a>            <span class=n>results</span> <span class=o>=</span> <span class=n>searcher</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=n>limit</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</span><span id=__span-3-39><a href=#__codelineno-3-39 id=__codelineno-3-39 name=__codelineno-3-39></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Search for '</span><span class=si>{</span><span class=n>query_str</span><span class=si>}</span><span class=s2>' returned </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>results</span><span class=p>)</span><span class=si>}</span><span class=s2> results."</span><span class=p>)</span>
</span><span id=__span-3-40><a href=#__codelineno-3-40 id=__codelineno-3-40 name=__codelineno-3-40></a>            <span class=k>return</span> <span class=p>[</span><span class=n>result</span><span class=o>.</span><span class=n>fields</span><span class=p>()</span> <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>results</span><span class=p>]</span>
</span><span id=__span-3-41><a href=#__codelineno-3-41 id=__codelineno-3-41 name=__codelineno-3-41></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-3-42><a href=#__codelineno-3-42 id=__codelineno-3-42 name=__codelineno-3-42></a>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>"An error occurred during the search."</span><span class=p>,</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-3-43><a href=#__codelineno-3-43 id=__codelineno-3-43 name=__codelineno-3-43></a>        <span class=k>return</span> <span class=p>[]</span>
</span><span id=__span-3-44><a href=#__codelineno-3-44 id=__codelineno-3-44 name=__codelineno-3-44></a>
</span><span id=__span-3-45><a href=#__codelineno-3-45 id=__codelineno-3-45 name=__codelineno-3-45></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>"__main__"</span><span class=p>:</span>
</span><span id=__span-3-46><a href=#__codelineno-3-46 id=__codelineno-3-46 name=__codelineno-3-46></a>    <span class=n>json_files_directory</span> <span class=o>=</span> <span class=s2>"your JSON files directory"</span> 
</span><span id=__span-3-47><a href=#__codelineno-3-47 id=__codelineno-3-47 name=__codelineno-3-47></a>    <span class=n>index_dir</span> <span class=o>=</span> <span class=s2>"your index directory"</span> 
</span><span id=__span-3-48><a href=#__codelineno-3-48 id=__codelineno-3-48 name=__codelineno-3-48></a>    <span class=n>query_string</span> <span class=o>=</span> <span class=s2>"your query string"</span> 
</span><span id=__span-3-49><a href=#__codelineno-3-49 id=__codelineno-3-49 name=__codelineno-3-49></a>    <span class=n>search_results</span> <span class=o>=</span> <span class=n>search_index</span><span class=p>(</span><span class=n>query_string</span><span class=p>,</span> <span class=n>index_dir</span><span class=p>)</span>
</span><span id=__span-3-50><a href=#__codelineno-3-50 id=__codelineno-3-50 name=__codelineno-3-50></a>    <span class=k>if</span> <span class=n>search_results</span><span class=p>:</span>
</span><span id=__span-3-51><a href=#__codelineno-3-51 id=__codelineno-3-51 name=__codelineno-3-51></a>        <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>search_results</span><span class=p>:</span>
</span><span id=__span-3-52><a href=#__codelineno-3-52 id=__codelineno-3-52 name=__codelineno-3-52></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Question: </span><span class=si>{</span><span class=n>result</span><span class=p>[</span><span class=s1>'question'</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-3-53><a href=#__codelineno-3-53 id=__codelineno-3-53 name=__codelineno-3-53></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Answer: </span><span class=si>{</span><span class=n>result</span><span class=p>[</span><span class=s1>'answer'</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-3-54><a href=#__codelineno-3-54 id=__codelineno-3-54 name=__codelineno-3-54></a>            <span class=k>if</span> <span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"image"</span><span class=p>):</span>
</span><span id=__span-3-55><a href=#__codelineno-3-55 id=__codelineno-3-55 name=__codelineno-3-55></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Image: </span><span class=si>{</span><span class=n>result</span><span class=p>[</span><span class=s1>'image'</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-3-56><a href=#__codelineno-3-56 id=__codelineno-3-56 name=__codelineno-3-56></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>"</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-3-57><a href=#__codelineno-3-57 id=__codelineno-3-57 name=__codelineno-3-57></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-3-58><a href=#__codelineno-3-58 id=__codelineno-3-58 name=__codelineno-3-58></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>"No results found."</span><span class=p>)</span>
</span></code></pre></div> <h2 id=step-5-querying-the-index>Step 5: Querying the Index</h2> <p>Finally, you can query the index for a given search term. The following code snippet demonstrates how to search the index for a given query string.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=kn>import</span> <span class=nn>os</span>
</span><span id=__span-4-2><a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a><span class=kn>import</span> <span class=nn>json</span>
</span><span id=__span-4-3><a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a><span class=kn>import</span> <span class=nn>logging</span>
</span><span id=__span-4-4><a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a><span class=kn>from</span> <span class=nn>whoosh.index</span> <span class=kn>import</span> <span class=n>create_in</span><span class=p>,</span> <span class=n>open_dir</span>
</span><span id=__span-4-5><a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a><span class=kn>from</span> <span class=nn>whoosh.fields</span> <span class=kn>import</span> <span class=n>Schema</span><span class=p>,</span> <span class=n>TEXT</span><span class=p>,</span> <span class=n>ID</span><span class=p>,</span> <span class=n>STORED</span>
</span><span id=__span-4-6><a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a><span class=kn>from</span> <span class=nn>whoosh.qparser</span> <span class=kn>import</span> <span class=n>MultifieldParser</span>
</span><span id=__span-4-7><a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a><span class=kn>from</span> <span class=nn>whoosh.analysis</span> <span class=kn>import</span> <span class=n>StemmingAnalyzer</span>
</span><span id=__span-4-8><a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a>
</span><span id=__span-4-9><a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s2>"QuizIndexingService"</span><span class=p>)</span>
</span><span id=__span-4-10><a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a><span class=n>logger</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span>
</span><span id=__span-4-11><a href=#__codelineno-4-11 id=__codelineno-4-11 name=__codelineno-4-11></a>
</span><span id=__span-4-12><a href=#__codelineno-4-12 id=__codelineno-4-12 name=__codelineno-4-12></a><span class=n>file_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>FileHandler</span><span class=p>(</span><span class=s2>"quiz_indexing_service.log"</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>"a"</span><span class=p>)</span>
</span><span id=__span-4-13><a href=#__codelineno-4-13 id=__codelineno-4-13 name=__codelineno-4-13></a><span class=n>log_format</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>Formatter</span><span class=p>(</span>
</span><span id=__span-4-14><a href=#__codelineno-4-14 id=__codelineno-4-14 name=__codelineno-4-14></a><span class=s2>"</span><span class=si>%(asctime)s</span><span class=s2> - </span><span class=si>%(name)s</span><span class=s2> - [</span><span class=si>%(levelname)s</span><span class=s2>] [</span><span class=si>%(pathname)s</span><span class=s2>:</span><span class=si>%(lineno)d</span><span class=s2>] - </span><span class=si>%(message)s</span><span class=s2> - "</span>
</span><span id=__span-4-15><a href=#__codelineno-4-15 id=__codelineno-4-15 name=__codelineno-4-15></a><span class=s2>"[</span><span class=si>%(process)d</span><span class=s2>:</span><span class=si>%(thread)d</span><span class=s2>]"</span>
</span><span id=__span-4-16><a href=#__codelineno-4-16 id=__codelineno-4-16 name=__codelineno-4-16></a><span class=p>)</span>
</span><span id=__span-4-17><a href=#__codelineno-4-17 id=__codelineno-4-17 name=__codelineno-4-17></a><span class=n>file_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>log_format</span><span class=p>)</span>
</span><span id=__span-4-18><a href=#__codelineno-4-18 id=__codelineno-4-18 name=__codelineno-4-18></a><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>file_handler</span><span class=p>)</span>
</span><span id=__span-4-19><a href=#__codelineno-4-19 id=__codelineno-4-19 name=__codelineno-4-19></a>
</span><span id=__span-4-20><a href=#__codelineno-4-20 id=__codelineno-4-20 name=__codelineno-4-20></a><span class=n>console_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
</span><span id=__span-4-21><a href=#__codelineno-4-21 id=__codelineno-4-21 name=__codelineno-4-21></a><span class=n>console_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>log_format</span><span class=p>)</span>
</span><span id=__span-4-22><a href=#__codelineno-4-22 id=__codelineno-4-22 name=__codelineno-4-22></a><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>console_handler</span><span class=p>)</span>
</span><span id=__span-4-23><a href=#__codelineno-4-23 id=__codelineno-4-23 name=__codelineno-4-23></a>
</span><span id=__span-4-24><a href=#__codelineno-4-24 id=__codelineno-4-24 name=__codelineno-4-24></a><span class=n>schema</span> <span class=o>=</span> <span class=n>Schema</span><span class=p>(</span>
</span><span id=__span-4-25><a href=#__codelineno-4-25 id=__codelineno-4-25 name=__codelineno-4-25></a>    <span class=n>question</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>analyzer</span><span class=o>=</span><span class=n>StemmingAnalyzer</span><span class=p>()),</span>
</span><span id=__span-4-26><a href=#__codelineno-4-26 id=__codelineno-4-26 name=__codelineno-4-26></a>    <span class=n>answer</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-4-27><a href=#__codelineno-4-27 id=__codelineno-4-27 name=__codelineno-4-27></a>    <span class=n>image</span><span class=o>=</span><span class=n>ID</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-4-28><a href=#__codelineno-4-28 id=__codelineno-4-28 name=__codelineno-4-28></a>    <span class=n>options</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-4-29><a href=#__codelineno-4-29 id=__codelineno-4-29 name=__codelineno-4-29></a><span class=p>)</span>
</span><span id=__span-4-30><a href=#__codelineno-4-30 id=__codelineno-4-30 name=__codelineno-4-30></a>
</span><span id=__span-4-31><a href=#__codelineno-4-31 id=__codelineno-4-31 name=__codelineno-4-31></a><span class=k>def</span> <span class=nf>search_index</span><span class=p>(</span><span class=n>query_str</span><span class=p>,</span> <span class=n>index_dir</span><span class=p>):</span>
</span><span id=__span-4-32><a href=#__codelineno-4-32 id=__codelineno-4-32 name=__codelineno-4-32></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-4-33><a href=#__codelineno-4-33 id=__codelineno-4-33 name=__codelineno-4-33></a>        <span class=n>ix</span> <span class=o>=</span> <span class=n>open_dir</span><span class=p>(</span><span class=n>index_dir</span><span class=p>)</span>
</span><span id=__span-4-34><a href=#__codelineno-4-34 id=__codelineno-4-34 name=__codelineno-4-34></a>        <span class=k>with</span> <span class=n>ix</span><span class=o>.</span><span class=n>searcher</span><span class=p>()</span> <span class=k>as</span> <span class=n>searcher</span><span class=p>:</span>
</span><span id=__span-4-35><a href=#__codelineno-4-35 id=__codelineno-4-35 name=__codelineno-4-35></a>            <span class=n>parser</span> <span class=o>=</span> <span class=n>MultifieldParser</span><span class=p>([</span><span class=s2>"question"</span><span class=p>,</span> <span class=s2>"options"</span><span class=p>],</span> <span class=n>schema</span><span class=o>=</span><span class=n>ix</span><span class=o>.</span><span class=n>schema</span><span class=p>)</span>
</span><span id=__span-4-36><a href=#__codelineno-4-36 id=__codelineno-4-36 name=__codelineno-4-36></a>            <span class=n>query_str</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>"_</span><span class=si>{</span><span class=n>query_str</span><span class=si>}</span><span class=s2>_"</span>
</span><span id=__span-4-37><a href=#__codelineno-4-37 id=__codelineno-4-37 name=__codelineno-4-37></a>            <span class=n>query</span> <span class=o>=</span> <span class=n>parser</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>query_str</span><span class=p>)</span>
</span><span id=__span-4-38><a href=#__codelineno-4-38 id=__codelineno-4-38 name=__codelineno-4-38></a>            <span class=n>results</span> <span class=o>=</span> <span class=n>searcher</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=n>limit</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</span><span id=__span-4-39><a href=#__codelineno-4-39 id=__codelineno-4-39 name=__codelineno-4-39></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Search for '</span><span class=si>{</span><span class=n>query_str</span><span class=si>}</span><span class=s2>' returned </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>results</span><span class=p>)</span><span class=si>}</span><span class=s2> results."</span><span class=p>)</span>
</span><span id=__span-4-40><a href=#__codelineno-4-40 id=__codelineno-4-40 name=__codelineno-4-40></a>            <span class=k>return</span> <span class=p>[</span><span class=n>result</span><span class=o>.</span><span class=n>fields</span><span class=p>()</span> <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>results</span><span class=p>]</span>
</span><span id=__span-4-41><a href=#__codelineno-4-41 id=__codelineno-4-41 name=__codelineno-4-41></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-4-42><a href=#__codelineno-4-42 id=__codelineno-4-42 name=__codelineno-4-42></a>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>"An error occurred during the search."</span><span class=p>,</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-4-43><a href=#__codelineno-4-43 id=__codelineno-4-43 name=__codelineno-4-43></a>        <span class=k>return</span> <span class=p>[]</span>
</span><span id=__span-4-44><a href=#__codelineno-4-44 id=__codelineno-4-44 name=__codelineno-4-44></a>
</span><span id=__span-4-45><a href=#__codelineno-4-45 id=__codelineno-4-45 name=__codelineno-4-45></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>"__main__"</span><span class=p>:</span>
</span><span id=__span-4-46><a href=#__codelineno-4-46 id=__codelineno-4-46 name=__codelineno-4-46></a>    <span class=n>json_files_directory</span> <span class=o>=</span> <span class=s2>"your JSON files directory"</span> 
</span><span id=__span-4-47><a href=#__codelineno-4-47 id=__codelineno-4-47 name=__codelineno-4-47></a>    <span class=n>index_dir</span> <span class=o>=</span> <span class=s2>"your index directory"</span> 
</span><span id=__span-4-48><a href=#__codelineno-4-48 id=__codelineno-4-48 name=__codelineno-4-48></a>    <span class=n>query_string</span> <span class=o>=</span> <span class=s2>"your query string"</span> 
</span><span id=__span-4-49><a href=#__codelineno-4-49 id=__codelineno-4-49 name=__codelineno-4-49></a>    <span class=n>search_results</span> <span class=o>=</span> <span class=n>search_index</span><span class=p>(</span><span class=n>query_string</span><span class=p>,</span> <span class=n>index_dir</span><span class=p>)</span>
</span><span id=__span-4-50><a href=#__codelineno-4-50 id=__codelineno-4-50 name=__codelineno-4-50></a>    <span class=k>if</span> <span class=n>search_results</span><span class=p>:</span>
</span><span id=__span-4-51><a href=#__codelineno-4-51 id=__codelineno-4-51 name=__codelineno-4-51></a>        <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>search_results</span><span class=p>:</span>
</span><span id=__span-4-52><a href=#__codelineno-4-52 id=__codelineno-4-52 name=__codelineno-4-52></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Question: </span><span class=si>{</span><span class=n>result</span><span class=p>[</span><span class=s1>'question'</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-4-53><a href=#__codelineno-4-53 id=__codelineno-4-53 name=__codelineno-4-53></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Answer: </span><span class=si>{</span><span class=n>result</span><span class=p>[</span><span class=s1>'answer'</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-4-54><a href=#__codelineno-4-54 id=__codelineno-4-54 name=__codelineno-4-54></a>            <span class=k>if</span> <span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"image"</span><span class=p>):</span>
</span><span id=__span-4-55><a href=#__codelineno-4-55 id=__codelineno-4-55 name=__codelineno-4-55></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Image: </span><span class=si>{</span><span class=n>result</span><span class=p>[</span><span class=s1>'image'</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-4-56><a href=#__codelineno-4-56 id=__codelineno-4-56 name=__codelineno-4-56></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>"</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-4-57><a href=#__codelineno-4-57 id=__codelineno-4-57 name=__codelineno-4-57></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-4-58><a href=#__codelineno-4-58 id=__codelineno-4-58 name=__codelineno-4-58></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>"No results found."</span><span class=p>)</span>
</span></code></pre></div> <h2 id=conclusion>Conclusion</h2> <p>Creating an efficient indexing pipeline for the 'linkedin-skill-assessments-quizzes' repository involves systematic cloning, data processing, indexing, and query service setup. This comprehensive guide has walked you through each step with detailed code snippets, leveraging the <code>Whoosh</code> library for indexing.</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-5-1><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a><span class=kn>import</span> <span class=nn>os</span>
</span><span id=__span-5-2><a href=#__codelineno-5-2 id=__codelineno-5-2 name=__codelineno-5-2></a><span class=kn>import</span> <span class=nn>json</span>
</span><span id=__span-5-3><a href=#__codelineno-5-3 id=__codelineno-5-3 name=__codelineno-5-3></a><span class=kn>import</span> <span class=nn>logging</span>
</span><span id=__span-5-4><a href=#__codelineno-5-4 id=__codelineno-5-4 name=__codelineno-5-4></a><span class=kn>from</span> <span class=nn>whoosh.index</span> <span class=kn>import</span> <span class=n>create_in</span><span class=p>,</span> <span class=n>open_dir</span>
</span><span id=__span-5-5><a href=#__codelineno-5-5 id=__codelineno-5-5 name=__codelineno-5-5></a><span class=kn>from</span> <span class=nn>whoosh.fields</span> <span class=kn>import</span> <span class=n>Schema</span><span class=p>,</span> <span class=n>TEXT</span><span class=p>,</span> <span class=n>ID</span><span class=p>,</span> <span class=n>STORED</span>
</span><span id=__span-5-6><a href=#__codelineno-5-6 id=__codelineno-5-6 name=__codelineno-5-6></a><span class=kn>from</span> <span class=nn>whoosh.qparser</span> <span class=kn>import</span> <span class=n>MultifieldParser</span>
</span><span id=__span-5-7><a href=#__codelineno-5-7 id=__codelineno-5-7 name=__codelineno-5-7></a><span class=kn>from</span> <span class=nn>whoosh.analysis</span> <span class=kn>import</span> <span class=n>StemmingAnalyzer</span>
</span><span id=__span-5-8><a href=#__codelineno-5-8 id=__codelineno-5-8 name=__codelineno-5-8></a>
</span><span id=__span-5-9><a href=#__codelineno-5-9 id=__codelineno-5-9 name=__codelineno-5-9></a><span class=c1># Set up logging</span>
</span><span id=__span-5-10><a href=#__codelineno-5-10 id=__codelineno-5-10 name=__codelineno-5-10></a>
</span><span id=__span-5-11><a href=#__codelineno-5-11 id=__codelineno-5-11 name=__codelineno-5-11></a><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=s2>"QuizIndexingService"</span><span class=p>)</span>
</span><span id=__span-5-12><a href=#__codelineno-5-12 id=__codelineno-5-12 name=__codelineno-5-12></a><span class=n>logger</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>)</span>
</span><span id=__span-5-13><a href=#__codelineno-5-13 id=__codelineno-5-13 name=__codelineno-5-13></a>
</span><span id=__span-5-14><a href=#__codelineno-5-14 id=__codelineno-5-14 name=__codelineno-5-14></a><span class=n>file_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>FileHandler</span><span class=p>(</span><span class=s2>"quiz_indexing_service.log"</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=s2>"a"</span><span class=p>)</span>
</span><span id=__span-5-15><a href=#__codelineno-5-15 id=__codelineno-5-15 name=__codelineno-5-15></a><span class=n>log_format</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>Formatter</span><span class=p>(</span>
</span><span id=__span-5-16><a href=#__codelineno-5-16 id=__codelineno-5-16 name=__codelineno-5-16></a><span class=s2>"</span><span class=si>%(asctime)s</span><span class=s2> - </span><span class=si>%(name)s</span><span class=s2> - [</span><span class=si>%(levelname)s</span><span class=s2>] [</span><span class=si>%(pathname)s</span><span class=s2>:</span><span class=si>%(lineno)d</span><span class=s2>] - </span><span class=si>%(message)s</span><span class=s2> - "</span>
</span><span id=__span-5-17><a href=#__codelineno-5-17 id=__codelineno-5-17 name=__codelineno-5-17></a><span class=s2>"[</span><span class=si>%(process)d</span><span class=s2>:</span><span class=si>%(thread)d</span><span class=s2>]"</span>
</span><span id=__span-5-18><a href=#__codelineno-5-18 id=__codelineno-5-18 name=__codelineno-5-18></a><span class=p>)</span>
</span><span id=__span-5-19><a href=#__codelineno-5-19 id=__codelineno-5-19 name=__codelineno-5-19></a><span class=n>file_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>log_format</span><span class=p>)</span>
</span><span id=__span-5-20><a href=#__codelineno-5-20 id=__codelineno-5-20 name=__codelineno-5-20></a><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>file_handler</span><span class=p>)</span>
</span><span id=__span-5-21><a href=#__codelineno-5-21 id=__codelineno-5-21 name=__codelineno-5-21></a>
</span><span id=__span-5-22><a href=#__codelineno-5-22 id=__codelineno-5-22 name=__codelineno-5-22></a><span class=n>console_handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
</span><span id=__span-5-23><a href=#__codelineno-5-23 id=__codelineno-5-23 name=__codelineno-5-23></a><span class=n>console_handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>log_format</span><span class=p>)</span>
</span><span id=__span-5-24><a href=#__codelineno-5-24 id=__codelineno-5-24 name=__codelineno-5-24></a><span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>console_handler</span><span class=p>)</span>
</span><span id=__span-5-25><a href=#__codelineno-5-25 id=__codelineno-5-25 name=__codelineno-5-25></a>
</span><span id=__span-5-26><a href=#__codelineno-5-26 id=__codelineno-5-26 name=__codelineno-5-26></a><span class=c1># Define the schema for the index</span>
</span><span id=__span-5-27><a href=#__codelineno-5-27 id=__codelineno-5-27 name=__codelineno-5-27></a>
</span><span id=__span-5-28><a href=#__codelineno-5-28 id=__codelineno-5-28 name=__codelineno-5-28></a><span class=n>schema</span> <span class=o>=</span> <span class=n>Schema</span><span class=p>(</span>
</span><span id=__span-5-29><a href=#__codelineno-5-29 id=__codelineno-5-29 name=__codelineno-5-29></a><span class=n>question</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>analyzer</span><span class=o>=</span><span class=n>StemmingAnalyzer</span><span class=p>()),</span>
</span><span id=__span-5-30><a href=#__codelineno-5-30 id=__codelineno-5-30 name=__codelineno-5-30></a><span class=n>answer</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-5-31><a href=#__codelineno-5-31 id=__codelineno-5-31 name=__codelineno-5-31></a><span class=n>image</span><span class=o>=</span><span class=n>ID</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-5-32><a href=#__codelineno-5-32 id=__codelineno-5-32 name=__codelineno-5-32></a><span class=n>options</span><span class=o>=</span><span class=n>TEXT</span><span class=p>(</span><span class=n>stored</span><span class=o>=</span><span class=kc>True</span><span class=p>),</span>
</span><span id=__span-5-33><a href=#__codelineno-5-33 id=__codelineno-5-33 name=__codelineno-5-33></a><span class=p>)</span>
</span><span id=__span-5-34><a href=#__codelineno-5-34 id=__codelineno-5-34 name=__codelineno-5-34></a>
</span><span id=__span-5-35><a href=#__codelineno-5-35 id=__codelineno-5-35 name=__codelineno-5-35></a><span class=k>def</span> <span class=nf>create_search_index</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>,</span> <span class=n>index_dir</span><span class=p>):</span>
</span><span id=__span-5-36><a href=#__codelineno-5-36 id=__codelineno-5-36 name=__codelineno-5-36></a><span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>index_dir</span><span class=p>):</span>
</span><span id=__span-5-37><a href=#__codelineno-5-37 id=__codelineno-5-37 name=__codelineno-5-37></a><span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>index_dir</span><span class=p>)</span>
</span><span id=__span-5-38><a href=#__codelineno-5-38 id=__codelineno-5-38 name=__codelineno-5-38></a>
</span><span id=__span-5-39><a href=#__codelineno-5-39 id=__codelineno-5-39 name=__codelineno-5-39></a>    <span class=n>index</span> <span class=o>=</span> <span class=n>create_in</span><span class=p>(</span><span class=n>index_dir</span><span class=p>,</span> <span class=n>schema</span><span class=p>)</span>
</span><span id=__span-5-40><a href=#__codelineno-5-40 id=__codelineno-5-40 name=__codelineno-5-40></a>    <span class=n>writer</span> <span class=o>=</span> <span class=n>index</span><span class=o>.</span><span class=n>writer</span><span class=p>()</span>
</span><span id=__span-5-41><a href=#__codelineno-5-41 id=__codelineno-5-41 name=__codelineno-5-41></a>
</span><span id=__span-5-42><a href=#__codelineno-5-42 id=__codelineno-5-42 name=__codelineno-5-42></a>    <span class=k>for</span> <span class=n>json_filename</span> <span class=ow>in</span> <span class=n>os</span><span class=o>.</span><span class=n>listdir</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>):</span>
</span><span id=__span-5-43><a href=#__codelineno-5-43 id=__codelineno-5-43 name=__codelineno-5-43></a>        <span class=n>json_file_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>,</span> <span class=n>json_filename</span><span class=p>)</span>
</span><span id=__span-5-44><a href=#__codelineno-5-44 id=__codelineno-5-44 name=__codelineno-5-44></a>        <span class=k>if</span> <span class=n>json_file_path</span><span class=o>.</span><span class=n>endswith</span><span class=p>(</span><span class=s2>".json"</span><span class=p>):</span>
</span><span id=__span-5-45><a href=#__codelineno-5-45 id=__codelineno-5-45 name=__codelineno-5-45></a>            <span class=k>try</span><span class=p>:</span>
</span><span id=__span-5-46><a href=#__codelineno-5-46 id=__codelineno-5-46 name=__codelineno-5-46></a>                <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>json_file_path</span><span class=p>,</span> <span class=s2>"r"</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s2>"utf-8"</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span><span id=__span-5-47><a href=#__codelineno-5-47 id=__codelineno-5-47 name=__codelineno-5-47></a>                    <span class=n>questions</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
</span><span id=__span-5-48><a href=#__codelineno-5-48 id=__codelineno-5-48 name=__codelineno-5-48></a>                    <span class=k>for</span> <span class=n>question</span> <span class=ow>in</span> <span class=n>questions</span><span class=p>:</span>
</span><span id=__span-5-49><a href=#__codelineno-5-49 id=__codelineno-5-49 name=__codelineno-5-49></a>                        <span class=n>concatenated_options</span> <span class=o>=</span> <span class=s2>" "</span><span class=o>.</span><span class=n>join</span><span class=p>(</span>
</span><span id=__span-5-50><a href=#__codelineno-5-50 id=__codelineno-5-50 name=__codelineno-5-50></a>                            <span class=p>[</span><span class=n>opt</span><span class=p>[</span><span class=s2>"option"</span><span class=p>]</span> <span class=k>for</span> <span class=n>opt</span> <span class=ow>in</span> <span class=n>question</span><span class=p>[</span><span class=s2>"options"</span><span class=p>]]</span>
</span><span id=__span-5-51><a href=#__codelineno-5-51 id=__codelineno-5-51 name=__codelineno-5-51></a>                        <span class=p>)</span>
</span><span id=__span-5-52><a href=#__codelineno-5-52 id=__codelineno-5-52 name=__codelineno-5-52></a>                        <span class=n>writer</span><span class=o>.</span><span class=n>add_document</span><span class=p>(</span>
</span><span id=__span-5-53><a href=#__codelineno-5-53 id=__codelineno-5-53 name=__codelineno-5-53></a>                            <span class=n>question</span><span class=o>=</span><span class=n>question</span><span class=p>[</span><span class=s2>"question"</span><span class=p>],</span>
</span><span id=__span-5-54><a href=#__codelineno-5-54 id=__codelineno-5-54 name=__codelineno-5-54></a>                            <span class=n>answer</span><span class=o>=</span><span class=n>question</span><span class=p>[</span><span class=s2>"answer"</span><span class=p>],</span>
</span><span id=__span-5-55><a href=#__codelineno-5-55 id=__codelineno-5-55 name=__codelineno-5-55></a>                            <span class=n>image</span><span class=o>=</span><span class=n>question</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"image"</span><span class=p>,</span> <span class=s2>""</span><span class=p>),</span>
</span><span id=__span-5-56><a href=#__codelineno-5-56 id=__codelineno-5-56 name=__codelineno-5-56></a>                            <span class=n>options</span><span class=o>=</span><span class=n>concatenated_options</span><span class=p>,</span>
</span><span id=__span-5-57><a href=#__codelineno-5-57 id=__codelineno-5-57 name=__codelineno-5-57></a>                        <span class=p>)</span>
</span><span id=__span-5-58><a href=#__codelineno-5-58 id=__codelineno-5-58 name=__codelineno-5-58></a>            <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-5-59><a href=#__codelineno-5-59 id=__codelineno-5-59 name=__codelineno-5-59></a>                <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span>
</span><span id=__span-5-60><a href=#__codelineno-5-60 id=__codelineno-5-60 name=__codelineno-5-60></a>                    <span class=sa>f</span><span class=s2>"Failed to process file </span><span class=si>{</span><span class=n>json_file_path</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>"</span><span class=p>,</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-5-61><a href=#__codelineno-5-61 id=__codelineno-5-61 name=__codelineno-5-61></a>                <span class=p>)</span>
</span><span id=__span-5-62><a href=#__codelineno-5-62 id=__codelineno-5-62 name=__codelineno-5-62></a>
</span><span id=__span-5-63><a href=#__codelineno-5-63 id=__codelineno-5-63 name=__codelineno-5-63></a>    <span class=n>writer</span><span class=o>.</span><span class=n>commit</span><span class=p>()</span>
</span><span id=__span-5-64><a href=#__codelineno-5-64 id=__codelineno-5-64 name=__codelineno-5-64></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>"Indexing completed successfully."</span><span class=p>)</span>
</span><span id=__span-5-65><a href=#__codelineno-5-65 id=__codelineno-5-65 name=__codelineno-5-65></a>
</span><span id=__span-5-66><a href=#__codelineno-5-66 id=__codelineno-5-66 name=__codelineno-5-66></a><span class=k>def</span> <span class=nf>search_index</span><span class=p>(</span><span class=n>query_str</span><span class=p>,</span> <span class=n>index_dir</span><span class=p>):</span>
</span><span id=__span-5-67><a href=#__codelineno-5-67 id=__codelineno-5-67 name=__codelineno-5-67></a><span class=k>try</span><span class=p>:</span>
</span><span id=__span-5-68><a href=#__codelineno-5-68 id=__codelineno-5-68 name=__codelineno-5-68></a><span class=n>ix</span> <span class=o>=</span> <span class=n>open_dir</span><span class=p>(</span><span class=n>index_dir</span><span class=p>)</span>
</span><span id=__span-5-69><a href=#__codelineno-5-69 id=__codelineno-5-69 name=__codelineno-5-69></a><span class=k>with</span> <span class=n>ix</span><span class=o>.</span><span class=n>searcher</span><span class=p>()</span> <span class=k>as</span> <span class=n>searcher</span><span class=p>:</span>
</span><span id=__span-5-70><a href=#__codelineno-5-70 id=__codelineno-5-70 name=__codelineno-5-70></a><span class=n>parser</span> <span class=o>=</span> <span class=n>MultifieldParser</span><span class=p>([</span><span class=s2>"question"</span><span class=p>,</span> <span class=s2>"options"</span><span class=p>],</span> <span class=n>schema</span><span class=o>=</span><span class=n>ix</span><span class=o>.</span><span class=n>schema</span><span class=p>)</span>
</span><span id=__span-5-71><a href=#__codelineno-5-71 id=__codelineno-5-71 name=__codelineno-5-71></a><span class=n>query_str</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>"_</span><span class=si>{</span><span class=n>query_str</span><span class=si>}</span><span class=s2>_"</span>
</span><span id=__span-5-72><a href=#__codelineno-5-72 id=__codelineno-5-72 name=__codelineno-5-72></a><span class=n>query</span> <span class=o>=</span> <span class=n>parser</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=n>query_str</span><span class=p>)</span>
</span><span id=__span-5-73><a href=#__codelineno-5-73 id=__codelineno-5-73 name=__codelineno-5-73></a><span class=n>results</span> <span class=o>=</span> <span class=n>searcher</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=n>limit</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span>
</span><span id=__span-5-74><a href=#__codelineno-5-74 id=__codelineno-5-74 name=__codelineno-5-74></a><span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Search for '</span><span class=si>{</span><span class=n>query_str</span><span class=si>}</span><span class=s2>' returned </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>results</span><span class=p>)</span><span class=si>}</span><span class=s2> results."</span><span class=p>)</span>
</span><span id=__span-5-75><a href=#__codelineno-5-75 id=__codelineno-5-75 name=__codelineno-5-75></a><span class=k>return</span> <span class=p>[</span><span class=n>result</span><span class=o>.</span><span class=n>fields</span><span class=p>()</span> <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>results</span><span class=p>]</span>
</span><span id=__span-5-76><a href=#__codelineno-5-76 id=__codelineno-5-76 name=__codelineno-5-76></a><span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-5-77><a href=#__codelineno-5-77 id=__codelineno-5-77 name=__codelineno-5-77></a><span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=s2>"An error occurred during the search."</span><span class=p>,</span> <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-5-78><a href=#__codelineno-5-78 id=__codelineno-5-78 name=__codelineno-5-78></a><span class=k>return</span> <span class=p>[]</span>
</span><span id=__span-5-79><a href=#__codelineno-5-79 id=__codelineno-5-79 name=__codelineno-5-79></a>
</span><span id=__span-5-80><a href=#__codelineno-5-80 id=__codelineno-5-80 name=__codelineno-5-80></a><span class=k>if</span> <span class=o>**</span><span class=n>name</span><span class=o>**</span> <span class=o>==</span> <span class=s2>"**main**"</span><span class=p>:</span>
</span><span id=__span-5-81><a href=#__codelineno-5-81 id=__codelineno-5-81 name=__codelineno-5-81></a><span class=n>json_files_directory</span> <span class=o>=</span> <span class=sa>r</span><span class=s2>"C:\Users\Harminder Nijjar\Desktop\blog\kb-blog-portfolio-mkdocs-master\scripts\linkedin_skill_assessments_quizzes"</span> <span class=c1># replace with your json files directory</span>
</span><span id=__span-5-82><a href=#__codelineno-5-82 id=__codelineno-5-82 name=__codelineno-5-82></a><span class=n>index_dir</span> <span class=o>=</span> <span class=s2>"indexdir"</span> <span class=c1># replace with your index directory</span>
</span><span id=__span-5-83><a href=#__codelineno-5-83 id=__codelineno-5-83 name=__codelineno-5-83></a>
</span><span id=__span-5-84><a href=#__codelineno-5-84 id=__codelineno-5-84 name=__codelineno-5-84></a>    <span class=n>create_search_index</span><span class=p>(</span><span class=n>json_files_directory</span><span class=p>,</span> <span class=n>index_dir</span><span class=p>)</span>
</span><span id=__span-5-85><a href=#__codelineno-5-85 id=__codelineno-5-85 name=__codelineno-5-85></a>
</span><span id=__span-5-86><a href=#__codelineno-5-86 id=__codelineno-5-86 name=__codelineno-5-86></a>    <span class=n>query_string</span> <span class=o>=</span> <span class=s2>"Django"</span>  <span class=c1># replace with your actual search term</span>
</span><span id=__span-5-87><a href=#__codelineno-5-87 id=__codelineno-5-87 name=__codelineno-5-87></a>    <span class=n>search_results</span> <span class=o>=</span> <span class=n>search_index</span><span class=p>(</span><span class=n>query_string</span><span class=p>,</span> <span class=n>index_dir</span><span class=p>)</span>
</span><span id=__span-5-88><a href=#__codelineno-5-88 id=__codelineno-5-88 name=__codelineno-5-88></a>
</span><span id=__span-5-89><a href=#__codelineno-5-89 id=__codelineno-5-89 name=__codelineno-5-89></a>    <span class=k>if</span> <span class=n>search_results</span><span class=p>:</span>
</span><span id=__span-5-90><a href=#__codelineno-5-90 id=__codelineno-5-90 name=__codelineno-5-90></a>        <span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>search_results</span><span class=p>:</span>
</span><span id=__span-5-91><a href=#__codelineno-5-91 id=__codelineno-5-91 name=__codelineno-5-91></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Question: </span><span class=si>{</span><span class=n>result</span><span class=p>[</span><span class=s1>'question'</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-5-92><a href=#__codelineno-5-92 id=__codelineno-5-92 name=__codelineno-5-92></a>            <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Answer: </span><span class=si>{</span><span class=n>result</span><span class=p>[</span><span class=s1>'answer'</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-5-93><a href=#__codelineno-5-93 id=__codelineno-5-93 name=__codelineno-5-93></a>            <span class=k>if</span> <span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>"image"</span><span class=p>):</span>
</span><span id=__span-5-94><a href=#__codelineno-5-94 id=__codelineno-5-94 name=__codelineno-5-94></a>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>"Image: </span><span class=si>{</span><span class=n>result</span><span class=p>[</span><span class=s1>'image'</span><span class=p>]</span><span class=si>}</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-5-95><a href=#__codelineno-5-95 id=__codelineno-5-95 name=__codelineno-5-95></a>            <span class=nb>print</span><span class=p>(</span><span class=s2>"</span><span class=se>\n</span><span class=s2>"</span><span class=p>)</span>
</span><span id=__span-5-96><a href=#__codelineno-5-96 id=__codelineno-5-96 name=__codelineno-5-96></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-5-97><a href=#__codelineno-5-97 id=__codelineno-5-97 name=__codelineno-5-97></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>"No results found."</span><span class=p>)</span>
</span></code></pre></div></div> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 15, 2023</span> <br> Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 15, 2023</span> </small> </div> <form class=md-feedback hidden name=feedback> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" data-md-value=1 title="This page was helpful" type=submit> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"></path></svg> </button> <button class="md-feedback__icon md-icon" data-md-value=0 title="This page could be improved" type=submit> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"></path></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by using our <a href=YOUR_FEEDBACK_URL rel=noopener target=_blank>feedback form</a>. </div> </div> </div> </fieldset> </form> <style>
                .share-button:hover {
                    filter: brightness(1.2);
                }
                .share-buttons {
                    display: flex;
                    justify-content: flex-end;
                }
            </style> <div class=share-buttons> <button class=share-button onclick="window.open('https://twitter.com/intent/tweet?url=https://harminder.dev/blog/2023/11/14/building-an-indexing-pipeline-for-linkedin-skill-assessments-quizzes-repository', 'TwitterShare', 'width=550,height=680,menubar=no,toolbar=no'); return false;" style="background-color: #1da1f2; color: white; padding: 5px 10px; border-radius: 5px; margin-right: 10px; cursor: pointer; display: flex; align-items: center;"> <i class="fa-brands fa-twitter" style="margin-right: 5px;"></i> Tweet </button> <button class=share-button onclick="window.open('https://www.linkedin.com/shareArticle?url=https://harminder.dev/blog/2023/11/14/building-an-indexing-pipeline-for-linkedin-skill-assessments-quizzes-repository', 'LinkedinShare', 'width=550,height=730,menubar=no,toolbar=no'); return false;" style="background-color: #0077b5; color: white; padding: 5px 10px; border-radius: 5px; cursor: pointer; display: flex; align-items: center;"> <i class="fa-brands fa-linkedin" style="margin-right: 5px;"></i> Share </button> </div> <h2 id=__comments>Comments</h2> <script async crossorigin=anonymous data-category-id=DIC_kwDOKetpMs4Cas4f data-emit-metadata=1 data-input-position=top data-lang=en data-mapping=pathname data-reactions-enabled=0 data-repo=harmindersinghnijjar/kb-blog-portfolio-mkdocs data-repo-id=R_kgDOKetpMg data-strict=0 data-theme=dark src=https://giscus.app/client.js>
</script> </article> </div> </div> <button class="md-top md-icon" data-md-component=top hidden type=button> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </button> </main> <footer class=md-footer> <nav aria-label=Footer class="md-footer__inner md-grid"> <a aria-label="Previous: OpenAI's Developer Conference" href=../../07/openais-developer-conference/ class="md-footer__link md-footer__link--prev"> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> OpenAI's Developer Conference </div> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright  2023 Harminder Singh Nijjar </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "navigation.top", "content.tooltips", "header.title", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../../assets/javascripts/bundle.aecac24b.min.js></script> <script src=https://cdn.jsdelivr.net/npm/apexcharts></script> <script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4024063910372726"></script> </body> </html>